<!DOCTYPE html>
<html>

<head lang="en">
	<meta charset="UTF-8">
	<title>注册</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="format-detection" content="telephone=no">
	<meta name="renderer" content="webkit">
	<meta http-equiv="Cache-Control" content="no-siteapp" />

	<link rel="stylesheet" href="__STATIC__/index/login/amazeui.css" />
	<link href="__STATIC__/index/login/dlstyle.css" rel="stylesheet" type="text/css">
	<link href="__STATIC__/layui/css/layui.css" rel="stylesheet" type="text/css">

	<script src="__STATIC__/layui/layui.js"></script>
	<script src="__STATIC__/index/login/jquery-3.2.1.min.js"></script>
	<script src="__STATIC__/index/login/amazeui.min.js"></script>

</head>

<body>

	<div class="login-boxtitle">
		<a href="home/demo.html"><img alt="" src="__STATIC__/index/login/logobig.png" /></a>
	</div>

	<div class="res-banner">
		<div class="res-main">
			<div class="login-banner-bg"><span></span><img src="__STATIC__/index/login/big.jpg" /></div>
			<!--Begin 注册框 Begin-->
			<div class="login-box">
				<div class="am-tabs" id="doc-my-tabs">
						<ul class="am-tabs-nav am-nav am-nav-tabs am-nav-justify">
							<li class="am-active"><a href="">邮箱注册</a></li>
							<li><a href="">手机号注册</a></li>
						</ul>

						<div class="am-tabs-bd">
							<!--Begin 邮箱注册 Begin-->
							<div class="am-tab-panel am-active">
								<form method="post" class="layui-form">

									<div class="user-email">
										<label for="email"><i class="am-icon-envelope-o"></i></label>
										<input type="email" name="user_email"  id="email"  placeholder="请输入邮箱账号">
									</div>
                                    {/*lay-verify="required|email"*/}
									<div class="verification">
										<label for="email_code"><i class="am-icon-code-fork"></i></label>
										<input type="text" name="user_code" id="email_code"   placeholder="请输入验证码">
										<a class="btn" href="javascript:void(0);"  id="sendEmailCode">
											<span class="dyButton" id="span_email">获取</span>
										</a>{/*lay-verify="required"*/}
									</div>
									<div class="user-pass">
										<label for="email_pwd"><i class="am-icon-lock"></i></label>
										<input type="password" name="user_pwd" id="email_pwd"  placeholder="设置密码">
									</div>{/*lay-verify="email_pwd"*/}
									<div class="user-pass">
										<label for="email_pwd1"><i class="am-icon-lock"></i></label>
										<input type="password" name="user_pwd1" id="email_pwd1"   placeholder="确认密码">
									</div>{/*lay-verify="email_pwd1"*/}
									<div class="am-cf">
										<input type="button" lay-submit lay-filter="formEmail" value="注册" class="am-btn am-btn-primary am-btn-sm am-fl">
									</div>
								</form>
							</div>
							<!--End 邮箱注册 End-->

							<!--Begin 手机号注册 Begin-->
							<div class="am-tab-panel">
								<form method="post" class="layui-form">
									<div class="user-phone">
										<label for="tel"><i class="am-icon-mobile-phone am-icon-md"></i></label>
										<input type="tel" name="user_tel"   id="tel" placeholder="请输入手机号">
									</div>{/*lay-verify="required|phone"*/}
									<div class="verification">
										<label for="tel_code"><i class="am-icon-code-fork"></i></label>
										<input type="tel" name="user_code"  id="tel_code" placeholder="请输入验证码">
										<a class="btn" href="javascript:void(0);" id="sendTelCode">{/*lay-verify="required"*/}
											<span class="dyButton" id="span_tel">获取</span>
										</a>
									</div>
									<div class="user-pass">
										<label for="tel_pwd"><i class="am-icon-lock"></i></label>
										<input type="password" name="user_pwd"  id="tel_pwd" placeholder="设置密码">
									</div>{/*lay-verify="checkpwd1"*/}
									<div class="user-pass">
										<label for="tel_pwd1"><i class="am-icon-lock"></i></label>
										<input type="password" name="user_pwd1" id="tel_pwd1" placeholder="确认密码">
									</div>{/*lay-verify="checkpwd2"*/}
									<div class="am-cf">
										<input type="button" lay-submit lay-filter="formTel" value="注册" class="am-btn am-btn-primary am-btn-sm am-fl">
									</div>
								</form>
							</div>
							<!--End 手机号注册 End-->
							<script>
								$(function() {
									$('#doc-my-tabs').tabs();
								  })
							</script>
						</div>

				</div>
			</div>
			<!--End 注册框 End-->
		</div>
	</div>

	<!--Begin Footer Begin-->
	<div class="footer ">
			<div class="footer-hd ">
				<p>
					<a href="# ">恒望科技</a>
					<b>|</b>
					<a href="# ">商城首页</a>
					<b>|</b>
					<a href="# ">支付宝</a>
					<b>|</b>
					<a href="# ">物流</a>
				</p>
			</div>
			<div class="footer-bd ">
				<p>
					<a href="# ">关于恒望</a>
					<a href="# ">合作伙伴</a>
					<a href="# ">联系我们</a>
					<a href="# ">网站地图</a>
					<em>© 2015-2025 Hengwang.com 版权所有. 更多模板 <a href="http://www.cssmoban.com/" target="_blank" title="模板之家">模板之家</a> - Collect from <a href="http://www.cssmoban.com/" title="网页模板" target="_blank">网页模板</a></em>
				</p>
			</div>
		</div>
	<!--End Footer End-->
</body>

</html>

<script>
	$(function () {
		layui.use(['layer','form'],function(){
		    var layer=layui.layer;
		    var form=layui.form;
		    /**邮箱获取按钮 */
			$('#span_email').click(function () {
				var email = $('#email').val();
				// 验证邮箱 必填 格式
				var reg = /^\w+@\w+\.com$/;
				if(email==''){
				    layer.msg("邮箱必填",{icon:2});
                    return false
                }else if(!reg.test(email)){
                    layer.msg("邮箱格式有误",{icon:2});
                    return false
                }else{


                    $.post(
                        "{:url('Regist/sendEmail')}",
                        {email:email},
                        function (result) {
                            // 把获取修改成秒数
                            $('#span_email').text('10s');
                            // 添加定时器
                            _time = setInterval(function () {
                                // 获取span_email
                                var second=parseInt($('#span_email').text());
                                if(second==0){
                                    $('#span_email').text('获取');
                                    clearInterval(_time);
                                    $('#span_email').css('pointer-events','auto');
                                }else{
                                    second=second-1;
                                    $('#span_email').text(second+'s');
                                    $('#span_email').css('pointer-events','none');
                                }
                            },1000);

                            // console.log(result)
                            layer.msg(result.font,{icon:result.code});
                            if(result.code==2){
                                $('#span_email').text('获取');
                                clearInterval(_time);
							}
                        },
                        'json'
                    )
                }


            });
            /**js验证 */
            form.verify({
                email_pwd: function(value,item){
                    var reg = /^.{4,12}$/i;
                    if (!reg.test(value)) {
                        return "密码4-12位";
                    }
                },
                email_pwd1: function(value,item){
                    var email_pwd = $('#email_pwd').val()
                    if (value!=email_pwd) {
                        return "确认密码与密码不一致";
                    }
                }

            });
            /** 邮箱表单监听*/
            form.on('submit(formEmail)',function (data) {
                // console.log(data.field)
                $.post(
                    "{:url('Regist/regist')}",
                    data.field,
                    function (result) {
                        layer.msg(result.font,{icon:result.code});
                        if(result.code==1){
                            location.href="{:url('Index/index')}"
                        }
                    },
                    'json'
                )
            });
            /**手机获取按钮 */
            $('#span_tel').click(function () {
                var tel = $('#tel').val();
                // 验证邮箱 必填 格式
                var reg = /^1[3-9]\d{9}$/;
                if(tel==''){
                    layer.msg("手机必填",{icon:2});
                    return false
                }else if(!reg.test(tel)){
                    layer.msg("邮箱格式有误",{icon:2});
                    return false
                }else{
                    // 把获取修改成秒数
                    $('#span_tel').text('10s');
                    // 添加定时器
                    _time = setInterval(function () {
                        // 获取span_email
                        var second=parseInt($('#span_tel').text());
                        if(second==0){
                            $('#span_tel').text('获取');
                            clearInterval(_time);
                            $('#span_tel').css('pointer-events','auto');
                        }else{
                            second=second-1;
                            $('#span_tel').text(second+'s');
                            $('#span_tel').css('pointer-events','none');
                        }
                    },1000);

                    $.post(
                        "{:url('Regist/sendTel')}",
                        {tel:tel},
                        function (result) {
                            // console.log(result)
                            layer.msg(result.font,{icon:result.code});
                            if(result.code==2){
							$('#span_tel').text('获取');
							clearInterval(_time);
							}
                        },
                        'json'
                    )
                }

            });
            /** 手机表单监听*/
            form.on('submit(formTel)',function (data) {
                // console.log(data.field)
                $.post(
                    "{:url('Regist/regist')}",
                    data.field,
                    function (result) {
                        layer.msg(result.font,{icon:result.code});
                        if(result.code==1){
                            location.href="{:url('Index/index')}"
                        }
                    },
                    'json'
                )
            })
		})
    })
	
</script>


<script>
    // $(function () {
    //     layui.use(['layer','form'],function(){
    //         var layer=layui.layer;
    //         var form=layui.form;
    //         var second = 10; // 设置倒计时秒数
    //         var _time; //设置全局变量 放定时器(方便清楚定时器)
    //         // 获取 手机号点击事件
    //         $('.btn').click(function () {
    //             var _this = $(this)
    //             // 获取手机号 或邮箱的值
    //             var _value = _this.parent().prev().find('input').val();
    //             // console.log(_value)
    //             if (_value==''){
    //                 layer.msg('邮箱或手机号不能为空',{icon:2});
    //             }else{
    //                 $.post(
    //                     "{:url('Regist/send')}",
    //                     {value:_value},
    //                     function (result) {
    //                         // console.log(result)
    //                         layer.msg(result.font,{icon:result.code});
    //                         if (result.code==1){
    //                             // 把获取改成60秒
    //                             _this.find('span').text(second+'s');
    //                             // 调定时器 秒数不断减少
    //                             if (_value.indexOf('@')){
    //                                 _time = setInterval(secondEmailTime,1000);
    //                             }else{
    //                                 _time = setInterval(secondTelTime,1000);
    //                             }
	//
    //                         }
    //                     },
    //                     'json'
    //                 )
    //             }
	//
    //         });
	//
    //         /**手机号
    //          * 秒数倒计时
    //          */
    //         function secondTelTime() {
    //             //获取span_tel
    //             var second = parseInt($('#span_tel').text());
    //             if(second==0){
    //                 $('#span_tel').text('获取');
    //                 clearInterval(_time);
    //                 $('#span_tel').parent().css('pointer-events','auto'); //生效
    //             }else{
    //                 second = second-1;
    //                 $('#span_tel').text(second+'s');
    //                 $('#span_tel').parent().css('pointer-events','none'); // 禁用
    //             }
    //         }
	//
    //         /**
    //          * 邮箱
    //          * 秒数倒计时
    //          */
    //         function secondEmailTime() {
    //             // 获取span_email
    //             var second = parseInt($('#span_email').text());
    //             if(second==0){
    //                 $('#span_email').text('获取');
    //                 clearInterval(_time);
    //                 $('#span_email').parent().css('pointer-events','auto'); //生效
    //             }else{
    //                 second = second-1;
    //                 $('#span_email').text(second+'s');
    //                 $('#span_email').parent().css('pointer-events','none'); // 禁用
    //             }
    //         }
	//
    //         //监听提交
    //         form.on('submit(formDemo)', function(data){
    //             // console.log(data.field)
    //             $.post(
    //                 "{:url('Regist/regist')}",
    //                 data.field,
    //                 function (result) {
    //                     layer.msg(result.font,{icon:result.code});
    //                     if (result.code==1){
    //                         location.href="{:url('Login/Login')}"
    //                     }
    //                 },
	// 				'json'
	//
    //             )
    //             return false;
    //         });
	//
    //     })
    // })
</script>

<script>
	// $(function(){
	//     layui.use(['layer','form'],function(){
	//         var layer=layui.layer;
	//         var form=layui.form;
	// 		var second=60;
	// 		var _time;
    //         //给获取的获取绑定一个点击事件
    //         $('.btn').click(function(){
    //             var _this=$(this);
    //             //获取手机号或邮箱的值
    //             var _value=_this.parent('div').prev('div').find('input').val();
    //             if(_value==''){
	// 				layer.msg('手机号或邮箱不能为空',{icon:2});
    //             }else{
    //                 $.post(
    //                     "{:url('Login/send')}",
	// 					{value:_value},
	// 					function(msg){
    //                         layer.msg(msg.font,{icon:msg.code});
	// 					},
	// 					'json'
	// 				);
    //                 //发送请求后 将获取改为60s
    //                 _this.find('span').text(second+'s');
    //                 if(_value.indexOf('@')){
    //                     //邮件秒数倒计时
    //                     _time=setInterval(secondEmailTime,1000);
    //                 }else{
    //                     //手机号秒数倒计时
    //                     _time=setInterval(secondTelTime,1000);
    //                 }
	//
    //             }
    //         });
	//
    //         //手机号发送秒数倒计时
	// 		function secondTelTime(){
	// 		    //获取span_tel
	// 			var second=parseInt($('#span_tel').text());
	// 			if(second==0){
    //                 $('#span_tel').text('获取');
    //                 clearInterval(_time);
    //                 $('#span_tel').parent('a').css('pointer-events','auto');
	// 			}else{
    //                 second=second-1;
    //                 $('#span_tel').text(second+'s');
    //                 $('#span_tel').parent('a').css('pointer-events','none');
	// 			}
	// 		}
	//
    //         //邮件发送秒数倒计时
    //         function secondEmailTime(){
    //             //获取span_email
    //             var second=parseInt($('#span_email').text());
    //             if(second==0){
    //                 $('#span_email').text('获取');
    //                 clearInterval(_time);
    //                 $('#span_email').parent('a').css('pointer-events','auto');
    //             }else{
    //                 second=second-1;
    //                 $('#span_email').text(second+'s');
    //                 $('#span_email').parent('a').css('pointer-events','none');
    //             }
    //         }
	//
	// 		//验证
    //         form.verify({
	// 			checkpwd1:function(value,item){
	// 			    var reg=/^[a-z0-9]{6,}$/;
	// 			    if(value==''){
	// 			        return '密码必填'
	// 				}else if(!reg.test(value)){
	// 			        return '密码由数字、字母组成6位及以上'
	// 				}
	// 			},
	// 			checkpwd2:function(value,item){
	// 			    var tel_pwd=$('#tel_pwd').val();
	// 			    var email_pwd=$('#email_pwd').val();
    //                 if(value==''){
    //                     return '确认密码必填'
    //                 }else if(value!=tel_pwd&&value!=email_pwd){
    //                     return '确认密码必须和密码一致'
	// 				}
	// 			}
	//
    //         });
    //         //监听表单提交
    //         form.on('submit(telDemo)', function(data){
	// 			$.post(
	// 			    "{:url('Login/register')}",
	// 				data.field,
	// 				function(msg){
	// 			        //console.log(msg);
	// 					layer.msg(msg.font,{icon:msg.code});
	// 					if(msg.code==1){
	// 			            location.href="{:url('Login/login')}";
	// 					}
	// 				},
	// 				'json'
	// 			);
    //             return false;
    //         });
	// 	});
	//
	// })
</script>